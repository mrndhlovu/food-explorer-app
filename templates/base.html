<!DOCTYPE html>
<html>

<head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" type="text/css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}" type="text/css" />

</head>

<body>
    <div class="ui container">
        <div class="ui menu">
            <div class="header">
                <a class="item" href="{{ url_for('index')}}">Food Explorers</a>
            </div>
            <a class="item" href="{{ url_for('get_cuisine')}}">Recipes</a>
            <a class="item" href="{{ url_for('add_recipe')}}">Add Recipe</a>

            <div class="right menu">
                {% if 'username' in session %}
                <a class="item" href="{{ url_for('logout')}}" onclick="{{ url_for('logout')}}">Logout</a> {% else %}
                <a class="item" href="{{ url_for('index')}}">Login</a>
                <a class="item" href="{{ url_for('register')}}">Register</a>{% endif %}
            </div>

        </div>
        <div class="right menu" id='user'>
            {% if 'username' in session %}

            <div class="ui tiny label red ">Logged in as: {{session['username']}}
                <a class="item">
            <i class="icon user black"></i>
                  </a> </div>

            {% else %} {% endif %}
        </div>
        <div class="ui container">
            <div class="ui padded segment">
                <div class="ui column grid">
                    <div class="twelve wide column ">
                        <div class="ui action input fluid">
                            <input type="id=" search " text" placeholder="Search...">
                            <a href="{{ url_for('browse_filter', query='search', sort='input()' )}}" class="item">
                                <div class="ui red button">Search</div>
                            </a>
                        </div>
                    </div>
                    <div class="four wide column right aligned">
                        <div class="ui middle aligned divided list">
                            <div class="ui labeled  icon top right pointing dropdown button red">
                                <i class="filter icon"></i>
                                <span class="text">Filter Recipes</span>
                                <div class="menu">
                                    <div class="ui icon search input">
                                        <i class="search icon"></i>
                                        <input type="text" placeholder="Search..." href="{{ url_for('browse_filter', query='category', sort='search' )}}">
                                    </div>
                                    <div class="ui left pointing dropdown link item">
                                        <div class="header">
                                            <i class="dropdown icon"></i> Filter by Categories
                                        </div>
                                        <div class="menu">
                                            {% for cat in categories %}
                                            <a class="item" href="{{ url_for('browse_filter', query='category', sort=cat.category_name)}}" id="country">
                                                <div class="item">
                                                    <i class="olive circle icon"></i> {{cat.category_name}}
                                                </div>
                                            </a>
                                            {% endfor %}
                                        </div>
                                    </div>
                                    <div class="divider"></div>
                                    <div class="header">
                                        <i class="tags icon"></i> Other Filters
                                    </div>
                                    <a class="item" href="{{ url_for('browse_filter', query='up_votes', sort='descending')}}" id="up_votes">
                                        <div class="item">
                                            <div class="ui red empty circular label"></div>
                                            Most Votes Descending
                                        </div>
                                    </a>
                                    <a class="item" href="{{ url_for('browse_filter', query='up_votes', sort='ascending')}}" id="up_votes">
                                        <div class="item">
                                            <div class="ui red empty circular label"></div>
                                            Most Votes Ascending
                                        </div>
                                    </a>
                                    <a class="item" href="{{ url_for('browse_filter', query='country', sort='Mexico')}}" id="country">
                                        <div class="item">
                                            <div class="ui black empty circular label"></div>
                                            Country
                                        </div>
                                    </a>
                                    <a class="item" href="{{ url_for('browse_filter', query='recent', sort='recent')}}" id="country">
                                        <div class="item">
                                            <div class="ui black empty circular label"></div>
                                            Most Recent
                                        </div>
                                    </a>
                                    <a class="item" href="{{ url_for('browse_filter', query='views', sort='ascending')}}" id="country">
                                        <div class="item">
                                            <i class="eye icon"></i> Views Ascending
                                        </div>
                                    </a>
                                    <a class="item" href="{{ url_for('browse_filter', query='views', sort='descending')}}" id="country">
                                        <div class="item">
                                            <i class="eye icon"></i> Views Descending
                                        </div>
                                    </a>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="ui column grid">
                <div class="eleven wide column">
                    {% block content %} {% endblock %}
                </div>
                <div class="five wide column">
                    <div class="ui segment">
                        <div class="ui divided list">
                            <div class="ui top attached label  center aligned light red">Most Recent</div>
                            {% for recent in most_recent %}
                            <div class="ui card">
                                <div class="extra content">
                                    <div class="left aligned author">
                                        <a href="{{ url_for('show_detail', recipe_id=recent._id ) }}"> <img class="ui avatar image" src="/static/images/waffle-heart-2697904_1280.jpg"> </a> {{recent.record.title}}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="ui segment">
                        <div class="ui list" >
                            <div class="ui top attached label light red">Favorites</div>
                            {% for fav in favourites %}
                            <div class="ui card">
                                <div class="extra content">
                                    <div class=" author">
                                        <img class="ui avatar image" src="/static/images/waffle-heart-2697904_1280.jpg"> {{ fav.userFavourites[ loop.first ] }}
                                    </div>

                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
    <script type="text/javascript" src="/static/js/index.js"></script>

    

</body>

</html>
