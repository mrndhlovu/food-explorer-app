{% extends 'base.html' %} {% block content %}
<div class="ui segments" id = "EditRecipeForm">
    <div class="ui top attached label yellow">Edit Recipe</div>
    <form class="ui form" action="{{ url_for('update_recipe', _id=recipes._id) }}" method="POST" class="col s12">

        <div class="ui segment">
            <div class="ui top attached label">Title</div>
            <div class="form-group">
                <input value='{{recipes.record.title}}' id="title" name="title">
            </div>
        </div>
        <div class="ui segment">
            <div class="ui top attached label">Category</div>
            <div class="form-group">
                <select id="category" name="category" class="ui search dropdown fluid">
                  <option value="" disabled selected>Choose Category</option>
                  {% for cat in categories %}
                      {% if cat.category_name == recipes.record.category %}
                      <option value="{{recipes.record.category}}" selected="{{cat.category_name}}" >{{recipes.record.category}}</option>
                      {% else %}
                       <option value="{{cat.category_name}}">{{cat.category_name}}</option>
                    {% endif %}
                  {% endfor %}
                </select>
            </div>
        </div>
        <div class="ui segment">
            <div class="ui top attached label">Country</div>
            <div class="form-group">
                <input id="country" name="country" value='{{recipes.record.country}}' placeholder="Country">
            </div>
        </div>
        <div class="ui segment">
            <div class="ui top attached label">Allergens</div>
            <button id="addAllergenButton" class="addAllergen circular ui icon button mini yellow right floated padded" type="button">
                      <i class="icon plus"></i>
                    </button>
            <div class="form-group" id="addAllergen">
                {% for allergens in recipes.record.allergens %}
                <div class="ui input focus fluid " id="inputContainer{{ loop.index }}">
                    <i class='icon delete deleteIcon yellow label allergens' id="deleteAllergen{{ loop.index0 }}"></i>
                    <input id="allergens" name="allergens" value='{{allergens}}'>
                </div> {% endfor %}
            </div>
        </div>
        <div class="ui segment">
            <div class="ui top attached label">Ingredients</div>
            <button id="addIngredientButton" class=" addIngredient circular ui icon button mini yellow right floated padded" type="button">
                      <i class="icon plus"></i>
                    </button>
            <div class="form-group" id="addIngredient">
                {% for ingredients in recipes.record.ingredients %}
                <div class="ui input focus fluid" id="ingredientsContainer{{ loop.index0 }}">
                    <i class="icon delete deleteIcon yellow label ingredient" id="deleteIngredient{{ loop.index0 }}"></i>
                    <input id="ingredients{{ loop.index0 }}" name="ingredient" value='{{ingredients}}'></div> {% endfor %}
            </div>
        </div>
        <div class="ui segment">
            <div class="ui top attached label">Directions</div>
            <button id="addInstructionButton" class=" addInstruction circular ui icon button mini yellow right floated padded" type="button">
                      <i class="icon plus"></i>
                    </button>
            <div class="form-group addInstruction" id="addInstruction">
                {% for directions in recipes.record.directions %}
                <div class="ui input focus fluid" id="directionsContainer{{ loop.index0 }}">
                    <i class="icon delete deleteIcon yellow label directions" id="deleteInstruction{{ loop.index0 }}"></i>
                    <textarea rows="3" id="directions{{ loop.index0 }}" name="directions" value='{{directions}}'>{{directions}}</textarea></div> {% endfor %}
            </div>
        </div>
        <div class="ui secondary segment">
            <button class="ui bottom attached label yellow" type="submit">Done</button>
        </div>

    </form>
</div>

{% endblock %}
